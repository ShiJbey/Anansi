{"inkVersion":21,"root":[["\n","\n",["done",{"#f":5,"#n":"g-0"}],null],"done",{"start":["#","^---","/#","#","^===","/#",{"->":"library"},"done",{"#f":1}],"library":[["#","^---","/#","#","^choiceLabel: Go to Library.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^library","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n",["^What do you want to do?","\n","thread",{"->":"get_actions"},"ev","str","^Look around","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->t->":"examine_library"},{"->":"library"},"\n",{"->":".^.^.^.g-1"},{"#f":5}],"#f":5,"#n":"g-0"}],{"g-1":["done",{"#f":5}]}],{"#f":1}],"examine_library":["^There are a lot of books in here.","\n","ev","void","/ev","->->",{"#f":1}],"get_actions":[["ev","str","^Get Pizza","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Eat Waffles","/str",{"f()":"test"},"/ev",{"*":".^.c-1","flg":5},"ev","str","^Storylet Options","/str",{"x()":"GetEligibleActions"},"/ev",{"*":".^.c-2","flg":5},"ev","str","^Storylet Options","/str",{"x()":"GetEligibleLocations"},"/ev",{"*":".^.c-3","flg":5},{"c-0":["^ ",{"->":"library"},"\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["^ ",{"->":"library"},"\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["done",{"#f":5}]}],{"#f":1}],"test":["ev",true,"/ev","~ret",{"#f":1}],"nap_in_room":["#","^---","/#","#","^choiceLabel: Take a nap","/#","#","^@query","/#","#","^player.location!player_dormroom","/#","#","^@end","/#","#","^hidden: true","/#","#","^tags: action","/#","#","^===","/#","^You decided to take a nap...","\n","ev",{"x()":"AdvanceTime"},"out","/ev","\n","^Time has advanced.","\n","done",{"#f":1}],"outside_library":["#","^---","/#","#","^choiceLabel: Go to Outside Library.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^outside_library","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","ev",{"CNT?":".^"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["\n","^You're standing outside of the campus library.","\n","^You look at your Student ID. The name says... ","ev","str","^text","/str","str","^What is your name?","/str","str","^PlayerName","/str",{"x()":"GetInput","exArgs":3},"out","/ev","\n","^It says ","ev",{"VAR?":"PlayerName"},"out","/ev","^. They usually spell it wrong, but the registrar manager had the same name.","\n","^What are the chances of that?","\n","^Your student ID number is...","ev","str","^int","/str","str","^Enter student ID...","/str","str","^StudentID","/str",{"x()":"GetInput","exArgs":3},"out","/ev","\n",{"->":".^.^.^.29"},null]}],"nop","\n","done",{"#f":1}],"dining_hall":["#","^---","/#","#","^choiceLabel: Go to Dining Hall.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^dining_hall","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","done",{"#f":1}],"gym":["#","^---","/#","#","^choiceLabel: Go to Gym.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^gym","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","done",{"#f":1}],"classroom":["#","^---","/#","#","^choiceLabel: Go to Classroom.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^classroom","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","done",{"#f":1}],"campus_walkway":["#","^---","/#","#","^choiceLabel: Go to Campus Walkway.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^campus_walkway","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","done",{"#f":1}],"evelyn_dormroom":["#","^---","/#","#","^choiceLabel: Go to Evelyn's room.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^evelyn_dormroom","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n",["ev","str","^evelyn.location!evelyn_dormroom","/str",{"x()":"DbAssert","exArgs":1},"/ev",{"->":".^.b","c":true},{"b":["\n","^You are in Evelyn's room. She is looking looking out the window, listening to music","\n",{"->":".^.^.^.25"},null]}],[{"->":".^.b"},{"b":["\n","^Evelyn is not here.","\n",{"->":".^.^.^.25"},null]}],"nop","\n","done",{"#f":1}],"astrid_dormroom":["#","^---","/#","#","^choiceLabel: Go to Astrid's room.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^astrid_dormroom","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n",["ev","str","^astrid.location!astrid_dormroom","/str",{"x()":"DbAssert","exArgs":1},"/ev",{"->":".^.b","c":true},{"b":["\n","^Astrid is studying at her desk.","\n",{"->":".^.^.^.25"},null]}],[{"->":".^.b"},{"b":["\n","^Astrid is not here.","\n",{"->":".^.^.^.25"},null]}],"nop","\n","done",{"#f":1}],"player_dormroom":["#","^---","/#","#","^choiceLabel: Go to your room.","/#","#","^hidden: true","/#","#","^tags: location","/#","#","^===","/#","ev","str","^player_dormroom","/str",{"x()":"SetPlayerLocation","exArgs":1},"out","/ev","\n","^You're in your room.","\n","done",{"#f":1}],"talk_to_astrid":["#","^---","/#","#","^choiceLabel: Talk to Astrid","/#","#","^@query","/#","#","^astrid.location!?loc","/#","#","^player.location!?loc","/#","#","^@end","/#","#","^hidden: true","/#","#","^tags: action","/#","#","^===","/#","ev","str","^astrid","/str","/ev",{"VAR=":"speaker","re":true},"ev","str","^convo, astrid","/str","str","^conversation_fallback","/str",{"x()":"QueueStoryletWithTags","exArgs":2},"out","/ev","\n","done",{"#f":1}],"talk_to_evelyn":["#","^---","/#","#","^choiceLabel: Talk to Evelyn","/#","#","^@query","/#","#","^evelyn.location!?loc","/#","#","^player.location!?loc","/#","#","^@end","/#","#","^hidden: true","/#","#","^tags: action","/#","#","^===","/#","ev","str","^evelyn","/str","/ev",{"VAR=":"speaker","re":true},"ev","str","^evelyn, convo","/str","str","^conversation_fallback","/str",{"x()":"QueueStoryletWithTags","exArgs":2},"out","/ev","\n","done",{"#f":1}],"talk_to_momo":["#","^---","/#","#","^choiceLabel: Talk to Momo","/#","#","^@query","/#","#","^momo.location!?loc","/#","#","^player.location!?loc","/#","#","^@end","/#","#","^hidden: true","/#","#","^tags: action","/#","#","^===","/#","ev","str","^momo","/str","/ev",{"VAR=":"speaker","re":true},"ev","str","^convo, astrid","/str","str","^conversation_fallback","/str",{"x()":"QueueStoryletWithTags","exArgs":2},"out","/ev","\n","done",{"#f":1}],"talk_to_giyu":["#","^---","/#","#","^choiceLabel: Talk to Giyu","/#","#","^@query","/#","#","^giyu.location!?loc","/#","#","^player.location!?loc","/#","#","^@end","/#","#","^hidden: true","/#","#","^tags: action","/#","#","^===","/#","ev","str","^giyu","/str","/ev",{"VAR=":"speaker","re":true},"ev","str","^convo","/str","str","^conversation_fallback","/str",{"x()":"QueueStoryletWithTags","exArgs":2},"out","/ev","\n","done",{"#f":1}],"conversation_fallback":["#","^---","/#","#","^===","/#","^They have nothing to say to you.","\n","done",{"#f":1}],"storylet_evelyn_a":["#","^---","/#","#","^tags: evelyn, convo","/#","#","^@using speaker as ?speaker","/#","#","^@query","/#","#","^?speaker.relationships.player.stats.Friendship!?friendship","/#","#","^gte ?friendship 10","/#","#","^lt ?friendship 30","/#","#","^@end","/#","#","^===","/#","ev",{"VAR?":"speaker"},"out","/ev","^: Good to see you again!","\n","done",{"#f":1}],"storylet_evelyn_b":["#","^---","/#","#","^tags: evelyn, convo","/#","#","^@using speaker as ?speaker","/#","#","^@query","/#","#","^?speaker.relationships.player.stats.Friendship!?val","/#","#","^eq ?val 0","/#","#","^@end","/#","#","^===","/#","ev",{"VAR?":"speaker"},"out","/ev","^.annoyed: Hi, nice to meet you.","\n","ev",{"VAR?":"player"},"out","/ev","^: Hi I'm the player","\n","ev","str","^storylet_sample_conversation","/str",{"x()":"QueueStorylet","exArgs":1},"out","/ev","\n","done",{"#f":1}],"storylet_evelyn_c":[{"temp=":"friendship"},"#","^---","/#","#","^tags: evelyn, convo","/#","#","^@using speaker as ?speaker","/#","#","^@query ?friendship","/#","#","^?speaker.relationships.player.stats.Friendship!?friendship","/#","#","^gte ?friendship 30","/#","#","^@end","/#","#","^===","/#","ev",{"VAR?":"speaker"},"out","/ev","^: Yooooooo! What up?? (Our friendship level is ","ev",{"VAR?":"friendship"},"out","/ev","^) ","ev",{"VAR?":"speaker"},"str","^player","/str","str","^Friendship","/str",2,{"x()":"IncrementRelationshipStat","exArgs":4},"out","/ev","^ ","ev","str","^BecomeBros","/str","str","^player, ","ev",{"VAR?":"speaker"},"out","/ev","/str",{"x()":"DispatchSocialEvent","exArgs":2},"out","/ev","\n","ev","str","ev",{"VAR?":"speaker"},"out","/ev","^.relationships.player.traits.bros; ","ev",{"VAR?":"speaker"},"out","/ev","/str",{"x()":"DbQuery","exArgs":1},"/ev",{"temp=":"h"},"\n","ev",{"VAR?":"h"},{"x()":"QuerySuccessful","exArgs":1},"/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"speaker"},"out","/ev","^: Looks like we are bros now!","\n",{"->":".^.^.^.84"},null]}],"nop","\n","ev",{"VAR?":"h"},{"x()":"DisposeDbQuery","exArgs":1},"pop","/ev","\n","ev","str","ev",{"VAR?":"speaker"},"out","/ev","^.relationships.player.stats.Friendship!?f","/str",{"x()":"DbQuery","exArgs":1},"/ev",{"temp=":"h","re":true},"\n","ev",{"VAR?":"h"},"str","^?f","/str",{"x()":"GetQueryBinding","exArgs":2},"/ev",{"temp=":"friendship","re":true},"\n","ev",{"VAR?":"h"},{"x()":"DisposeDbQuery","exArgs":1},"pop","/ev","\n","ev",{"VAR?":"speaker"},"out","/ev","^: Looks like our new friendship score is ","ev",{"VAR?":"friendship"},"out","/ev","^.","\n","done",{"#f":1}],"storylet_evelyn_d":["#","^---","/#","#","^tags: evelyn, convo","/#","#","^@using speaker as ?speaker","/#","#","^@query","/#","#","^?speaker.relationships.player.stats.Friendship!?friendship","/#","#","^lt ?friendship 0","/#","#","^@end","/#","#","^===","/#","ev",{"VAR?":"speaker"},"out","/ev","^: Eww. Leave me alone.","\n","done",{"#f":1}],"_storylet_evelyn_d":["ev",7,"/ev","~ret",{"#f":1}],"storylet_sample_conversation":["#","^---","/#","#","^choice_label:","/#","#","^tags: convo, astrid","/#","#","^@using speaker as ?speaker","/#","#","^@query","/#","#","^?speaker.relationships.?other.traits.friend","/#","#","^neq ?other player","/#","#","^player.relationships.?other.traits.rival","/#","#","^@end","/#","#","^@set other_character to ?other","/#","#","^===","/#","ev",{"VAR?":"speaker"},"out","/ev","^.happy: Hello! This is the starting knot!","\n","ev",{"VAR?":"speaker"},"out","/ev","^: Now, we'll go to knot 2!","\n",{"->":"knot_2"},"done",{"#f":1}],"knot_2":["ev",{"VAR?":"speaker"},"out","/ev","^: Hello from knot 2!","\n","ev",{"VAR?":"other_character"},"out","/ev","^: Time for a personality test.","\n","ev",{"VAR?":"speaker"},"out","/ev","^: Red pill or blue pill?","\n",[["ev",{"^->":"knot_2.18.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^Red pill",{"->":"$r","var":true},null]}],["ev",{"^->":"knot_2.18.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^Blue pill",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"knot_2.18.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","ev",true,"/ev",{"VAR=":"ChoseRedPill","re":true},{"->":"red_pill"},{"#f":5}],"c-1":["ev",{"^->":"knot_2.18.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"\n","ev",{"VAR?":"HealthPoints"},20,"-",{"VAR=":"HealthPoints","re":true},"/ev",{"->":"blue_pill"},"done",{"#f":5}]}],{"#f":1}],"red_pill":["ev",{"VAR?":"speaker"},"out","/ev","^: My god, how brave!","\n",{"->":"continue_conversation"},"done",{"#f":1}],"blue_pill":["ev",{"VAR?":"speaker"},"out","/ev","^: Bold move, my friend","\n",{"->":"continue_conversation"},"done",{"#f":1}],"continue_conversation":["ev",{"VAR?":"HealthPoints"},50,"<","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"speaker"},"out","/ev","^: You seem quite weak. I wonder why...","\n",{"->":".^.^.^.6"},null]}],"nop","\n","ev",{"VAR?":"speaker"},"out","/ev","^: Alright. You have answered my question.","\n","ev",{"VAR?":"ChoseRedPill"},"/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"other_character"},"out","/ev","^: You chose the red pill. But I'm still not sure I can trust you","\n",{"->":".^.^.^.18"},null]}],"nop","\n","ev",{"CNT?":"red_pill"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ ",{"->":"no_red_pill_comment"},{"->":".^.^.^.25"},null]}],"nop","\n","done",{"#f":1}],"no_red_pill_comment":["ev",{"VAR?":"speaker"},"out","/ev","^: You didn't choose the red pill. I'm not sure I can trust you.","\n","done","end","^trust you.","\n","done","end","^trust you.","\n","done","end",{"#f":1}],"global decl":["ev","str","^speaker","/str",{"VAR=":"speaker"},"str","^player","/str",{"VAR=":"player"},"str","^location","/str",{"VAR=":"location"},false,{"VAR=":"ChoseRedPill"},50,{"VAR=":"HealthPoints"},"str","^other_character","/str",{"VAR=":"other_character"},"str","^player","/str",{"VAR=":"PlayerName"},0,{"VAR=":"StudentID"},"/ev","end",null],"#f":1}],"listDefs":{}}